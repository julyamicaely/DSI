================================================================================
ğŸ¯ GUIA RÃPIDO: USAR MODELO RANDOM FOREST NO APP MOBILE REACT NATIVE
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROBLEMA: Modelos .joblib nÃ£o rodam em JavaScript/React Native             â”‚
â”‚  SOLUÃ‡ÃƒO: Criar API REST em Python que expÃµe o modelo                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

================================================================================
ğŸ“‹ PASSO A PASSO
================================================================================

1ï¸âƒ£  INSTALAR DEPENDÃŠNCIAS DO BACKEND
   
   cd api
   pip install -r requirements.txt
   
   Ou manualmente:
   pip install fastapi uvicorn pydantic joblib scikit-learn pandas

2ï¸âƒ£  INICIAR SERVIDOR PYTHON (BACKEND)
   
   python api_server.py
   
   âœ… Servidor rodarÃ¡ em: http://localhost:8000
   ğŸ“š DocumentaÃ§Ã£o automÃ¡tica: http://localhost:8000/docs

3ï¸âƒ£  TESTAR API NO NAVEGADOR
   
   Abra: http://localhost:8000/docs
   
   Teste o endpoint POST /predict/simple com:
   
   {
     "gender": 1,
     "age_years": 52,
     "height_cm": 175,
     "weight_kg": 85,
     "ap_hi": 140,
     "ap_lo": 90
   }

4ï¸âƒ£  INTEGRAR NO REACT NATIVE
   
   A. Copie o serviÃ§o:
      cp api/react_native_example.tsx src/services/CardioAPIService.tsx
   
   B. Configure a URL da API:
      - Emulador: http://localhost:8000
      - Celular fÃ­sico: http://SEU_IP:8000 (ex: http://192.168.1.10:8000)
   
   C. Use no seu componente:
   
   import CardioAPIService from './services/CardioAPIService';
   
   const result = await CardioAPIService.predictSimple({
     gender: 1,
     age_years: 52,
     height_cm: 175,
     weight_kg: 85,
     ap_hi: 140,
     ap_lo: 90
   });
   
   console.log('Probabilidade:', result.probability + '%');
   console.log('Risco:', result.risk_level);

================================================================================
ğŸ“¡ ENDPOINTS DISPONÃVEIS
================================================================================

GET  /health              â†’ Verifica se API estÃ¡ online
GET  /model/info          â†’ InformaÃ§Ãµes do modelo e features
POST /predict             â†’ PrediÃ§Ã£o completa (10 campos)
POST /predict/simple      â†’ PrediÃ§Ã£o simplificada (calcula IMC)

================================================================================
ğŸ¨ EXEMPLO DE RESPOSTA DA API
================================================================================

{
  "success": true,
  "probability": 67.23,          â† Probabilidade de doenÃ§a (%)
  "risk_level": "alto",          â† baixo / mÃ©dio / alto
  "risk_category": "alto_risco", â† sem_risco / risco_moderado / alto_risco
  "confidence": 67.23,           â† ConfianÃ§a da prediÃ§Ã£o (%)
  "recommendation": "Procure um cardiologista urgentemente...",
  "top_risk_factors": [
    "PressÃ£o sistÃ³lica elevada",
    "Obesidade (IMC alto)",
    "Idade avanÃ§ada",
    "Colesterol alto"
  ]
}

================================================================================
ğŸ“Š FEATURES NECESSÃRIAS (EM ORDEM!)
================================================================================

1.  gender              â†’ 0=feminino, 1=masculino
2.  ap_hi               â†’ PressÃ£o sistÃ³lica (80-250 mmHg)
3.  ap_lo               â†’ PressÃ£o diastÃ³lica (40-180 mmHg)
4.  smoke               â†’ 0=nÃ£o fuma, 1=fuma
5.  alco                â†’ 0=nÃ£o bebe, 1=bebe
6.  active              â†’ 0=sedentÃ¡rio, 1=ativo
7.  age_years           â†’ Idade em anos (18-120)
8.  bmi                 â†’ IMC calculado (ou use /predict/simple)
9.  cholesterol_high    â†’ 0=normal, 1=alto
10. gluc_high           â†’ 0=normal, 1=alto

âš ï¸  IMPORTANTE: Dados devem estar EXATAMENTE nesta ordem!

================================================================================
ğŸš€ VANTAGENS DESTA ARQUITETURA
================================================================================

âœ… Modelo nÃ£o precisa ser convertido para JavaScript
âœ… FÃ¡cil de atualizar o modelo (sÃ³ substituir o .joblib)
âœ… Funciona com qualquer frontend (React Native, Flutter, Web)
âœ… Backend pode adicionar lÃ³gica de negÃ³cio extra
âœ… Modelo fica protegido (nÃ£o vai no app)
âœ… API pode servir mÃºltiplos apps simultaneamente

================================================================================
ğŸ” PARA PRODUÃ‡ÃƒO
================================================================================

1. Configure CORS com domÃ­nios especÃ­ficos (nÃ£o usar "*")
2. Use HTTPS (SSL/TLS)
3. Adicione autenticaÃ§Ã£o (JWT tokens)
4. Implemente rate limiting (limitar requisiÃ§Ãµes/minuto)
5. FaÃ§a deploy em servidor (Heroku, Railway, AWS, etc.)

================================================================================
ğŸ› TROUBLESHOOTING
================================================================================

âŒ "API nÃ£o estÃ¡ acessÃ­vel"
   â†’ Verifique se o servidor Python estÃ¡ rodando
   â†’ Teste: curl http://localhost:8000/health
   â†’ No celular fÃ­sico, use IP da mÃ¡quina, nÃ£o localhost

âŒ "CORS policy blocked"
   â†’ API jÃ¡ estÃ¡ configurada para aceitar qualquer origem
   â†’ Se persistir, adicione seu domÃ­nio especÃ­fico

âŒ "Modelo nÃ£o encontrado"
   â†’ Verifique se existe: classification/models/random_forest_pipeline.joblib
   â†’ Modelo tem 190.34 MB

âŒ PrediÃ§Ãµes estranhas
   â†’ Valide pressÃ£o: ap_lo < ap_hi
   â†’ Valide ranges: idade 18-120, IMC 10-60, pressÃ£o 80-250/40-180

================================================================================
ğŸ“š ARQUIVOS CRIADOS
================================================================================

api/
â”œâ”€â”€ api_server.py              â†’ Servidor FastAPI (BACKEND)
â”œâ”€â”€ react_native_example.tsx   â†’ ServiÃ§o para React Native (FRONTEND)
â”œâ”€â”€ requirements.txt           â†’ DependÃªncias Python
â”œâ”€â”€ install.ps1               â†’ Script de instalaÃ§Ã£o (Windows)
â””â”€â”€ README.md                 â†’ DocumentaÃ§Ã£o completa

classification/models/
â””â”€â”€ random_forest_pipeline.joblib â†’ Modelo treinado (190.34 MB)

================================================================================
ğŸ’¡ RESUMO TÃ‰CNICO
================================================================================

Modelo:         RandomForestClassifier
Pipeline:       RobustScaler â†’ RandomForest
Features:       10 variÃ¡veis
Tamanho:        190.34 MB
AcurÃ¡cia:       72.08%
ROC-AUC:        0.7836
Treinado em:    15/11/2025 00:04:54
Portabilidade:  100% (apenas scikit-learn padrÃ£o)

================================================================================
ğŸ¯ PRÃ“XIMOS PASSOS
================================================================================

1. Instale as dependÃªncias: pip install -r api/requirements.txt
2. Inicie o servidor: python api/api_server.py
3. Teste no navegador: http://localhost:8000/docs
4. Integre no seu app React Native usando o CardioAPIService
5. (Opcional) FaÃ§a deploy em produÃ§Ã£o

================================================================================

ğŸ“– DocumentaÃ§Ã£o completa: api/README.md
ğŸ”¬ Teste interativo: http://localhost:8000/docs
ğŸ’¬ DÃºvidas? Veja exemplos em react_native_example.tsx

================================================================================
